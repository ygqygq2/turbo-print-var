import { LanguageConfig } from '../../types';

/**
 * 语言配置注册表
 */
const languageRegistry: Map<string, LanguageConfig> = new Map();

/**
 * 注册语言配置
 */
export function registerLanguage(config: LanguageConfig): void {
  languageRegistry.set(config.id, config);
}

/**
 * 获取语言配置
 */
export function getLanguageConfig(languageId: string): LanguageConfig | undefined {
  return languageRegistry.get(languageId);
}

/**
 * 是否支持该语言
 */
export function isLanguageSupported(languageId: string): boolean {
  return languageRegistry.has(languageId);
}

/**
 * 获取所有支持的语言ID
 */
export function getSupportedLanguages(): string[] {
  return Array.from(languageRegistry.keys());
}

// 注册所有支持的语言

// JavaScript/TypeScript 系列
registerLanguage({
  id: 'javascript',
  defaultLogFn: 'console.log',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

registerLanguage({
  id: 'typescript',
  defaultLogFn: 'console.log',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

registerLanguage({
  id: 'javascriptreact',
  defaultLogFn: 'console.log',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

registerLanguage({
  id: 'typescriptreact',
  defaultLogFn: 'console.log',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// Python
registerLanguage({
  id: 'python',
  defaultLogFn: 'print',
  commentSyntax: { line: '#' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Java
registerLanguage({
  id: 'java',
  defaultLogFn: 'System.out.println',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// C/C++
registerLanguage({
  id: 'c',
  defaultLogFn: 'printf',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

registerLanguage({
  id: 'cpp',
  defaultLogFn: 'std::cout',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// C#
registerLanguage({
  id: 'csharp',
  defaultLogFn: 'Console.WriteLine',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// Go
registerLanguage({
  id: 'go',
  defaultLogFn: 'fmt.Println',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Rust
registerLanguage({
  id: 'rust',
  defaultLogFn: 'println!',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// PHP
registerLanguage({
  id: 'php',
  defaultLogFn: 'echo',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// Ruby
registerLanguage({
  id: 'ruby',
  defaultLogFn: 'puts',
  commentSyntax: { line: '#' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Swift
registerLanguage({
  id: 'swift',
  defaultLogFn: 'print',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Kotlin
registerLanguage({
  id: 'kotlin',
  defaultLogFn: 'println',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Scala
registerLanguage({
  id: 'scala',
  defaultLogFn: 'println',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Groovy
registerLanguage({
  id: 'groovy',
  defaultLogFn: 'println',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Dart
registerLanguage({
  id: 'dart',
  defaultLogFn: 'print',
  commentSyntax: { line: '//' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// Lua
registerLanguage({
  id: 'lua',
  defaultLogFn: 'print',
  commentSyntax: { line: '--' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Perl
registerLanguage({
  id: 'perl',
  defaultLogFn: 'print',
  commentSyntax: { line: '#' },
  defaultStringQuote: '"',
  needsSemicolon: true,
});

// R
registerLanguage({
  id: 'r',
  defaultLogFn: 'print',
  commentSyntax: { line: '#' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// Shell Script
registerLanguage({
  id: 'shellscript',
  defaultLogFn: 'echo',
  commentSyntax: { line: '#' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});

// CoffeeScript
registerLanguage({
  id: 'coffeescript',
  defaultLogFn: 'console.log',
  commentSyntax: { line: '#' },
  defaultStringQuote: '"',
  needsSemicolon: false,
});
